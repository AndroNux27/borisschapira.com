{% if include.postPage %}
  {% assign post = page %}
{% endif %}

<article class="post h-entry" itemscope itemtype="https://schema.org/BlogPosting"{% if include.postPage %} id="content"{% endif %}>
    {% capture readtime %}{{ post.content | number_of_words | append: '.0' | divided_by:site.reading_speed | ceil }}{% endcapture %}
    <header class="p-header">
        {% assign datetime = post.date | date_to_xmlschema %}
        <time class="p-date dt-published" datetime="{{ datetime }}">{{ post.date | localize: '%A %-d' }} <a href="{{ site.baseurl }}/{{ post.date | localize: '%Y/%m/' }}" title="Articles de {{ post.date | localize: '%B %Y' }}">{{ post.date | localize: '%B' }}</a> <a href="{{ site.baseurl }}/{{ post.date | localize: '%Y/' }}" title="Articles de {{ post.date | localize: '%Y' }}">{{ post.date | localize: '%Y' }}</a></time>{% if post.category != nil %}<span class="p-category"><a href="{{ site.baseurl }}/{{post.category|downcase]}}/">{{ post.category }}</a></span>{% endif %}<span class="p-readtime nowrap" title="Environ {{ readtime }} min. de lecture"><svg class="icon icon-clock"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-clock"></use></svg> {{ readtime }} min.</span><span class="p-author h-card">{{ site.author.name }}</span>
    </header>
  <h2 class="post-title p-name">
    {% if include.postPage %}
        {{ post.title }}
    {% else %}
    <a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a>
    {% endif %}
  </h2>

  <div class="post-content">
    {% if include.postPage %}
      {{ post.content }}
    {% else %}
      {% if post.content contains "<!-- more -->" %}
        {{ post.content | split:"<!-- more -->" | first % }}
      {% else %}
        {% if post.content.size < 500 %}
          {{ post.content }}
        {% else %}
          {{ post.excerpt | markdownify }}
        {% endif %}
      {% endif %}
      <p>
        <a href="{{ site.baseurl }}{{ post.url }}" title="{{post.title}}">Lire la suite â†’</a>
      </p>
    {% endif %}
  </div>
</article>
